{"version":3,"file":"index.esm.js","sources":["../src/ReferencedBy.jsx"],"sourcesContent":["import {WithReferringDocuments} from 'sanity'\nimport {IntentButton, Preview, useSchema} from 'sanity'\n\nconst ReferencedBy = (props) => {\n  const schema = useSchema()\n\n  return (\n    // eslint-disable-next-line react/jsx-filename-extension\n    <div>\n      {/* eslint-disable-next-line react/prop-types */}\n      <WithReferringDocuments id={props.documentId}>\n        {({referringDocuments, isLoading}) => {\n          if (isLoading) {\n            return <div>Looking for referring documents...</div>\n          }\n\n          if (!referringDocuments.length) return null\n\n          return (\n            <div style={styles.container}>\n              <div style={styles.title}>\n                Documents which reference this document ({referringDocuments.length})\n              </div>\n              {referringDocuments?.map((document) => {\n                const obj = {\n                  name: document.name,\n                  updatedAt: new Date(document._updatedAt),\n                  image: document.detailImage,\n                }\n\n                const schemaType = schema.get(document._type)\n                const documentType =\n                  document._type.charAt(0).toUpperCase() + document._type.slice(1)\n\n                return (\n                  <div key={document._id}>\n                    {schemaType ? (\n                      <IntentButton\n                        intent=\"edit\"\n                        params={{id: document._id, type: document._type}}\n                        style={styles.button}\n                      >\n                        <div style={styles.typeText}>{documentType}</div>\n                        <Preview\n                          value={document}\n                          schemaType={schemaType}\n                          style={styles.buttonText}\n                        />\n                      </IntentButton>\n                    ) : (\n                      <div>\n                        A document of the unknown type <em>{document._type}</em>\n                      </div>\n                    )}\n                  </div>\n                )\n              })}\n            </div>\n          )\n        }}\n      </WithReferringDocuments>\n    </div>\n  )\n}\n\nconst styles = {\n  container: {margin: '0px 40px', padding: '32px 20px'},\n  title: {\n    fontSize: '.8em',\n    fontWeight: 'bold',\n    color: '#272A2D',\n    marginBottom: '12px',\n  },\n  button: {\n    display: 'block',\n    marginBottom: '0.5rem',\n    backgroundColor: 'transparent',\n    padding: '4px',\n    boxShadow: 'none !important',\n  },\n\n  typeText: {\n    color: '#272A2D',\n    marginBottom: '0.5rem',\n    fontWeight: '400',\n    fontSize: '12px',\n  },\n  buttonText: {\n    color: '#272A2D',\n  },\n}\n\nconst targetStyles = document.createElement('style')\ntargetStyles.innerText = `\n  .jtFVaK {\n    color: #272A2D !important;\n  }\n  a[data-ui=\"Button\"]:hover,\n  .customButton:hover {\n    background-color: #f7f7f7 !important;\n  }\n  .kmZqBX {\n    --card-border-color: #D9DCE3 !important;\n  }\n  .bXJFhW {\n        --card-border-color: #D9DCE3 !important;\n\n  }`\ndocument.head.appendChild(targetStyles)\n\nexport default ReferencedBy\n"],"names":["ReferencedBy","props","schema","useSchema","jsx","children","WithReferringDocuments","id","documentId","_ref","referringDocuments","isLoading","length","jsxs","style","styles","container","title","map","document","schemaType","get","_type","documentType","charAt","toUpperCase","slice","IntentButton","intent","params","_id","type","button","typeText","Preview","value","buttonText","margin","padding","fontSize","fontWeight","color","marginBottom","display","backgroundColor","boxShadow","targetStyles","createElement","innerText","head","appendChild"],"mappings":"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"}